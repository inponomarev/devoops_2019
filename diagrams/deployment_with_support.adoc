:backend: revealjs
:revealjs_theme: white
:customcss: common.css
:revealjs_transition: none

== Добавим немного красоты
["graphviz", "main_scheme1", "svg"]
---------------------------------------------------------------------
digraph main {
  rankdir = LR;
  source [shape=polygon,sides=5,peripheries=3,color=lightblue,style=filled,label="Исходный \nсайт"];
  spectator [shape=polygon,sides=5,peripheries=3,color=orange,style=filled,label="Пользователь"];

  source -> puppetheatre;
  bootstrapper -> redis -> bootstrapper;
  puppetheatre -> redis -> puppetheatre;
  puppetheatre -> kafka;
  sop -> kafka -> sop;
  kafka -> odds_api;

  odds_api -> ingress;
  ingress -> spectator;

  subgraph mainline {
    label = "Main line";
    bootstrapper [shape=diamond];
    puppetheatre [shape=diamond];
    sop [shape=diamond];
    odds_api [shape=diamond];
  }

  subgraph side_services {
    label = "Side services";
    rank = same;
    redis [shape=box]
    kafka [shape=box]
  }

  subgraph support {
    label = "Support";
    rank = same;
    dns_manager [shape=box];
    cert_manager [shape=box];
    load_balancer [shape=box];
    ingress [shape=box];
  }
  load_balancer, dns_manager, cert_manager -> ingress;

  subgraph service {
    label = "Service";
    rank = same;
    logs [shape=box];
    metrics [shape=box];
  }
  logs, metrics -> ingress;
}
---------------------------------------------------------------------